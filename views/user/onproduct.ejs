<!DOCTYPE html>
<html lang="en" >
<head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>MR Ecommerce Site</title>
<link href='https://fonts.googleapis.com/css?family=Oswald:700' rel='stylesheet' type='text/css'>
<link rel='stylesheet' href='https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.0.0/css/bootstrap.css'><link rel="stylesheet" href="./style.css">
<link rel="stylesheet" href="/user/css/usertem.css">

</head>
<body>
<!-- partial:index.partial.html -->
<body style="background: #FDFBD0">
  <div class="container">
    <%- include('./header.ejs') %>    

<div class="container-fluid">
 <div class="row onpr">
    <div class="col-md-5">          
           <img src="/productimage/<%= data.productlimg %>" style="width:100%; height:40%"><br/><br/>
           <img src="/productimage/<%= data.productlimg %>" class="onprimg">           
           <img src="/productimage/<%= data.productmimg %>" class="onprimg">
           <img src="/productimage/<%= data.productsimg %>" class="onprimg">
           <img src="/productimage/<%= data.productmimg %>" class="onprimg">
    </div>

    <div class="col-md-7">
        <div class=""><h3><%= data.productname %></h3></div>

        <div class="" style="display: flex; font-size: 20px">
          <span>Price : <%= data.productprice %></span>        
            <span>&nbsp;  &nbsp; Total Price :</span> &nbsp;  &nbsp; 
          <div class=""><span id="total"><%= data.productprice %></span></div>
        </div>

        <div class="" style="display: flex; font-size: 20px">          
        <span>Quantity :&nbsp;  &nbsp;  </span>
        <input type="number" value="1" id="quantity" name="" onchange="myFunction(this)" 
            price="<%= data.productprice %>">
        </div>

        <div class="text-info description"><%= data.productdescription %></div>
        <button class="btn btn-lg" style="background: #2abbe8; margin-top: 20px">Buy Now</button>
        <button class="btn btn-lg" style="background: #f57224; margin-top: 20px" onclick="addcard(this)"
        tid="<%= data._id %>" productimage ="<%= data.productlimg %>" price="<%= data.productprice %>" productname="<%= data.productname %>">
          Add to Card
        </button>
    </div>
</div>

 

           
</div>

  </div>

<%- include('./fooder.ejs') %>


<script>
  
  function myFunction(e){
    const quantity = document.getElementById("quantity");    
    const price = e.getAttribute("price");        
    document.getElementById("total").innerHTML = price * quantity.value;

}

function addcard(e){
  const id = e.getAttribute("tid");
  const productimage = e.getAttribute("productimage");
  const productname = e.getAttribute("productname");
  const price = e.getAttribute("price");
  const quantity = document.getElementById("quantity").value;
  const total = document.getElementById("total").innerHTML
 const image = JSON.stringify(productimage);
 

  productorder = JSON.parse(localStorage.getItem("productorder") || "[]");
  productorder.push({id:id, image:image, productname:productname, price:price, quantity:quantity, total:total});
  localStorage.setItem("productorder", JSON.stringify(productorder));
  
  window.history.back();
}
</script>




<script defer src="https://use.fontawesome.com/releases/v5.0.6/js/all.js"></script>
</body>
<!-- partial -->
  <script src='https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js'></script>
<script src='https://cdnjs.cloudflare.com/ajax/libs/jquery-easing/1.3/jquery.easing.min.js'></script>
<script src='https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.0.0/js/bootstrap.min.js'></script>
</body>
</html>
